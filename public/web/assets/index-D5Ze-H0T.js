import{dT as La,L as fe,M as Da,a0 as de,a4 as Se,aq as W,n as M,o as h,a5 as J,c as B,b as Q,aJ as ve,w as L,d as re,a6 as D,F as oe,dk as _a,e5 as la,cM as sa,E as me,aR as Ma,aT as Ia,O as na,I as y,p as ue,h as Ie,t as le,a1 as Ne,aw as oa,cr as ia,fG as Ba,r as $,Q as za,cP as Be,ci as je,cj as Fa,cQ as We,fH as Ze,d1 as ge,a2 as ra,c4 as ie,d6 as xa,fI as Aa,dm as Ee,dn as we,$ as Ra,a as ze,R as se,fJ as Ha,T as ca,fk as ua,U as ce,ce as da,fK as Oa,cd as z,fL as Ce,fM as pa,a9 as fa,dW as Ka,cT as Ua,fN as Ye,fF as qa,cU as ja,cV as Wa,cY as Za,cZ as Ya,c_ as Ja,fO as Qa,d0 as Xa,c$ as Ga,b_ as et,fP as at,e3 as tt,c8 as ke,u,V as lt,c9 as Je,a7 as st,aM as nt,cL as ot,da as it,l as Fe,d7 as Qe,dc as rt,fQ as ct,dh as ut,fR as dt,fS as pt,X as ft,m as ht,s as vt,a$ as mt,b0 as gt,aY as bt}from"./index-hj2TArSk.js";import{u as Xe,c as Ge}from"./arrays-BDOeHkS8.js";var yt=1/0;function kt(e){var s=e==null?0:e.length;return s?La(e,yt):[]}var Ct=fe({name:"NodeContent",setup(){return{ns:de("cascader-node")}},render(){const{ns:e}=this,{node:s,panel:t}=this.$parent,{data:l,label:n}=s,{renderLabelFn:d}=t;return Da("span",{class:e.e("label")},d?d({node:s,data:l}):n)}});const Ae=Symbol(),Nt=fe({name:"ElCascaderNode",components:{ElCheckbox:Ia,ElRadio:Ma,NodeContent:Ct,ElIcon:me,Check:sa,Loading:la,ArrowRight:_a},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:s}){const t=na(Ae),l=de("cascader-node"),n=y(()=>t.isHoverMenu),d=y(()=>t.config.multiple),o=y(()=>t.config.checkStrictly),b=y(()=>{var E;return(E=t.checkedNodes[0])==null?void 0:E.uid}),p=y(()=>e.node.isDisabled),k=y(()=>e.node.isLeaf),v=y(()=>o.value&&!k.value||!p.value),f=y(()=>O(t.expandingNode)),g=y(()=>o.value&&t.checkedNodes.some(O)),O=E=>{var P;const{level:q,uid:ne}=e.node;return((P=E==null?void 0:E.pathNodes[q-1])==null?void 0:P.uid)===ne},F=()=>{f.value||t.expandNode(e.node)},V=E=>{const{node:P}=e;E!==P.checked&&t.handleCheckChange(P,E)},A=()=>{t.lazyLoad(e.node,()=>{k.value||F()})},R=E=>{n.value&&(Z(),!k.value&&s("expand",E))},Z=()=>{const{node:E}=e;!v.value||E.loading||(E.loaded?F():A())},I=()=>{n.value&&!k.value||(k.value&&!p.value&&!o.value&&!d.value?_(!0):Z())},Y=E=>{o.value?(V(E),e.node.loaded&&F()):_(E)},_=E=>{e.node.loaded?(V(E),!o.value&&F()):A()};return{panel:t,isHoverMenu:n,multiple:d,checkStrictly:o,checkedNodeId:b,isDisabled:p,isLeaf:k,expandable:v,inExpandingPath:f,inCheckedPath:g,ns:l,handleHoverExpand:R,handleExpand:Z,handleClick:I,handleCheck:_,handleSelectCheck:Y}}});function Et(e,s,t,l,n,d){const o=W("el-checkbox"),b=W("el-radio"),p=W("check"),k=W("el-icon"),v=W("node-content"),f=W("loading"),g=W("arrow-right");return h(),M("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:D([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:e.handleHoverExpand,onFocus:e.handleHoverExpand,onClick:e.handleClick},[J(" prefix "),e.multiple?(h(),B(o,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:ve(()=>{},["stop"]),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):e.checkStrictly?(h(),B(b,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:ve(()=>{},["stop"])},{default:L(()=>[J(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),re("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):e.isLeaf&&e.node.checked?(h(),B(k,{key:2,class:D(e.ns.e("prefix"))},{default:L(()=>[Q(p)]),_:1},8,["class"])):J("v-if",!0),J(" content "),Q(v),J(" postfix "),e.isLeaf?J("v-if",!0):(h(),M(oe,{key:3},[e.node.loading?(h(),B(k,{key:0,class:D([e.ns.is("loading"),e.ns.e("postfix")])},{default:L(()=>[Q(f)]),_:1},8,["class"])):(h(),B(k,{key:1,class:D(["arrow-right",e.ns.e("postfix")])},{default:L(()=>[Q(g)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var wt=Se(Nt,[["render",Et],["__file","node.vue"]]);const St=fe({name:"ElCascaderMenu",components:{Loading:la,ElIcon:me,ElScrollbar:oa,ElCascaderNode:wt},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const s=za(),t=de("cascader-menu"),{t:l}=ia(),n=Ba();let d=null,o=null;const b=na(Ae),p=$(null),k=y(()=>!e.nodes.length),v=y(()=>!b.initialLoaded),f=y(()=>`${n.value}-${e.index}`),g=A=>{d=A.target},O=A=>{if(!(!b.isHoverMenu||!d||!p.value))if(d.contains(A.target)){F();const R=s.vnode.el,{left:Z}=R.getBoundingClientRect(),{offsetWidth:I,offsetHeight:Y}=R,_=A.clientX-Z,E=d.offsetTop,P=E+d.offsetHeight;p.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${_} ${E} L${I} 0 V${E} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${_} ${P} L${I} ${Y} V${P} Z" />
        `}else o||(o=window.setTimeout(V,b.config.hoverThreshold))},F=()=>{o&&(clearTimeout(o),o=null)},V=()=>{p.value&&(p.value.innerHTML="",F())};return{ns:t,panel:b,hoverZone:p,isEmpty:k,isLoading:v,menuId:f,t:l,handleExpand:g,handleMouseMove:O,clearHoverZone:V}}});function Tt(e,s,t,l,n,d){const o=W("el-cascader-node"),b=W("loading"),p=W("el-icon"),k=W("el-scrollbar");return h(),B(k,{key:e.menuId,tag:"ul",role:"menu",class:D(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:L(()=>{var v;return[(h(!0),M(oe,null,ue(e.nodes,f=>(h(),B(o,{key:f.uid,node:f,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(h(),M("div",{key:0,class:D(e.ns.e("empty-text"))},[Q(p,{size:"14",class:D(e.ns.is("loading"))},{default:L(()=>[Q(b)]),_:1},8,["class"]),Ie(" "+le(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(h(),M("div",{key:1,class:D(e.ns.e("empty-text"))},[Ne(e.$slots,"empty",{},()=>[Ie(le(e.t("el.cascader.noData")),1)])],2)):(v=e.panel)!=null&&v.isHoverMenu?(h(),M("svg",{key:2,ref:"hoverZone",class:D(e.ns.e("hover-zone"))},null,2)):J("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var $t=Se(St,[["render",Tt],["__file","menu.vue"]]);let Vt=0;const Pt=e=>{const s=[e];let{parent:t}=e;for(;t;)s.unshift(t),t=t.parent;return s};class pe{constructor(s,t,l,n=!1){this.data=s,this.config=t,this.parent=l,this.root=n,this.uid=Vt++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:d,label:o,children:b}=t,p=s[b],k=Pt(this);this.level=n?0:l?l.level+1:1,this.value=s[d],this.label=s[o],this.pathNodes=k,this.pathValues=k.map(v=>v.value),this.pathLabels=k.map(v=>v.label),this.childrenData=p,this.children=(p||[]).map(v=>new pe(v,t,this)),this.loaded=!t.lazy||this.isLeaf||!Be(p)}get isDisabled(){const{data:s,parent:t,config:l}=this,{disabled:n,checkStrictly:d}=l;return(je(n)?n(s,this):!!s[n])||!d&&(t==null?void 0:t.isDisabled)}get isLeaf(){const{data:s,config:t,childrenData:l,loaded:n}=this,{lazy:d,leaf:o}=t,b=je(o)?o(s,this):s[o];return Fa(b)?d&&!n?!1:!(We(l)&&l.length):!!b}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(s){const{childrenData:t,children:l}=this,n=new pe(s,this.config,this);return We(t)?t.push(s):this.childrenData=[s],l.push(n),n}calcText(s,t){const l=s?this.pathLabels.join(t):this.label;return this.text=l,l}broadcast(s,...t){const l=`onParent${Ze(s)}`;this.children.forEach(n=>{n&&(n.broadcast(s,...t),n[l]&&n[l](...t))})}emit(s,...t){const{parent:l}=this,n=`onChild${Ze(s)}`;l&&(l[n]&&l[n](...t),l.emit(s,...t))}onParentCheck(s){this.isDisabled||this.setCheckState(s)}onChildCheck(){const{children:s}=this,t=s.filter(n=>!n.isDisabled),l=t.length?t.every(n=>n.checked):!1;this.setCheckState(l)}setCheckState(s){const t=this.children.length,l=this.children.reduce((n,d)=>{const o=d.checked?1:d.indeterminate?.5:0;return n+o},0);this.checked=this.loaded&&this.children.filter(n=>!n.isDisabled).every(n=>n.loaded&&n.checked)&&s,this.indeterminate=this.loaded&&l!==t&&l>0}doCheck(s){if(this.checked===s)return;const{checkStrictly:t,multiple:l}=this.config;t||!l?this.checked=s:(this.broadcast("check",s),this.setCheckState(s),this.emit("check"))}}const xe=(e,s)=>e.reduce((t,l)=>(l.isLeaf?t.push(l):(!s&&t.push(l),t=t.concat(xe(l.children,s))),t),[]);class ea{constructor(s,t){this.config=t;const l=(s||[]).map(n=>new pe(n,this.config));this.nodes=l,this.allNodes=xe(l,!1),this.leafNodes=xe(l,!0)}getNodes(){return this.nodes}getFlattedNodes(s){return s?this.leafNodes:this.allNodes}appendNode(s,t){const l=t?t.appendChild(s):new pe(s,this.config);t||this.nodes.push(l),this.allNodes.push(l),l.isLeaf&&this.leafNodes.push(l)}appendNodes(s,t){s.forEach(l=>this.appendNode(l,t))}getNodeByValue(s,t=!1){return!s&&s!==0?null:this.getFlattedNodes(t).find(n=>ge(n.value,s)||ge(n.pathValues,s))||null}getSameNode(s){return s&&this.getFlattedNodes(!1).find(({value:l,level:n})=>ge(s.value,l)&&s.level===n)||null}}const ha=ra({modelValue:{type:ie([Number,String,Array])},options:{type:ie(Array),default:()=>[]},props:{type:ie(Object),default:()=>({})}}),Lt={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:xa,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Dt=e=>y(()=>({...Lt,...e.props})),aa=e=>{if(!e)return 0;const s=e.id.split("-");return Number(s[s.length-2])},_t=e=>{if(!e)return;const s=e.querySelector("input");s?s.click():Aa(e)&&e.click()},Mt=(e,s)=>{const t=s.slice(0),l=t.map(d=>d.uid),n=e.reduce((d,o)=>{const b=l.indexOf(o.uid);return b>-1&&(d.push(o),t.splice(b,1),l.splice(b,1)),d},[]);return n.push(...t),n},It=fe({name:"ElCascaderPanel",components:{ElCascaderMenu:$t},props:{...ha,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ee,we,"close","expand-change"],setup(e,{emit:s,slots:t}){let l=!1;const n=de("cascader"),d=Dt(e);let o=null;const b=$(!0),p=$([]),k=$(null),v=$([]),f=$(null),g=$([]),O=y(()=>d.value.expandTrigger==="hover"),F=y(()=>e.renderLabel||t.default),V=()=>{const{options:c}=e,m=d.value;l=!1,o=new ea(c,m),v.value=[o.getNodes()],m.lazy&&Be(e.options)?(b.value=!1,A(void 0,N=>{N&&(o=new ea(N,m),v.value=[o.getNodes()]),b.value=!0,q(!1,!0)})):q(!1,!0)},A=(c,m)=>{const N=d.value;c=c||new pe({},N,void 0,!0),c.loading=!0;const C=w=>{const T=c,H=T.root?null:T;w&&(o==null||o.appendNodes(w,H)),T.loading=!1,T.loaded=!0,T.childrenData=T.childrenData||[],m&&m(w)};N.lazyLoad(c,C)},R=(c,m)=>{var N;const{level:C}=c,w=v.value.slice(0,C);let T;c.isLeaf?T=c.pathNodes[C-2]:(T=c,w.push(c.children)),((N=f.value)==null?void 0:N.uid)!==(T==null?void 0:T.uid)&&(f.value=c,v.value=w,!m&&s("expand-change",(c==null?void 0:c.pathValues)||[]))},Z=(c,m,N=!0)=>{const{checkStrictly:C,multiple:w}=d.value,T=g.value[0];l=!0,!w&&(T==null||T.doCheck(!1)),c.doCheck(m),P(),N&&!w&&!C&&s("close"),!N&&!w&&!C&&I(c)},I=c=>{c&&(c=c.parent,I(c),c&&R(c))},Y=c=>o==null?void 0:o.getFlattedNodes(c),_=c=>{var m;return(m=Y(c))==null?void 0:m.filter(N=>N.checked!==!1)},E=()=>{g.value.forEach(c=>c.doCheck(!1)),P(),v.value=v.value.slice(0,1),f.value=null,s("expand-change",[])},P=()=>{var c;const{checkStrictly:m,multiple:N}=d.value,C=g.value,w=_(!m),T=Mt(C,w),H=T.map(x=>x.valueByOption);g.value=T,k.value=N?H:(c=H[0])!=null?c:null},q=(c=!1,m=!1)=>{const{modelValue:N}=e,{lazy:C,multiple:w,checkStrictly:T}=d.value,H=!T;if(!(!b.value||l||!m&&ge(N,k.value)))if(C&&!c){const K=Xe(kt(Ge(N))).map(j=>o==null?void 0:o.getNodeByValue(j)).filter(j=>!!j&&!j.loaded&&!j.loading);K.length?K.forEach(j=>{A(j,()=>q(!1,m))}):q(!0,m)}else{const x=w?Ge(N):[N],K=Xe(x.map(j=>o==null?void 0:o.getNodeByValue(j,H)));ne(K,m),k.value=ua(N)}},ne=(c,m=!0)=>{const{checkStrictly:N}=d.value,C=g.value,w=c.filter(x=>!!x&&(N||x.isLeaf)),T=o==null?void 0:o.getSameNode(f.value),H=m&&T||w[0];H?H.pathNodes.forEach(x=>R(x,!0)):f.value=null,C.forEach(x=>x.doCheck(!1)),ze(w).forEach(x=>x.doCheck(!0)),g.value=w,ce(X)},X=()=>{da&&p.value.forEach(c=>{const m=c==null?void 0:c.$el;if(m){const N=m.querySelector(`.${n.namespace.value}-scrollbar__wrap`),C=m.querySelector(`.${n.b("node")}.${n.is("active")}`)||m.querySelector(`.${n.b("node")}.in-active-path`);Oa(N,C)}})},ee=c=>{const m=c.target,{code:N}=c;switch(N){case z.up:case z.down:{c.preventDefault();const C=N===z.up?-1:1;Ce(pa(m,C,`.${n.b("node")}[tabindex="-1"]`));break}case z.left:{c.preventDefault();const C=p.value[aa(m)-1],w=C==null?void 0:C.$el.querySelector(`.${n.b("node")}[aria-expanded="true"]`);Ce(w);break}case z.right:{c.preventDefault();const C=p.value[aa(m)+1],w=C==null?void 0:C.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`);Ce(w);break}case z.enter:case z.numpadEnter:_t(m);break}};return Ra(Ae,ze({config:d,expandingNode:f,checkedNodes:g,isHoverMenu:O,initialLoaded:b,renderLabelFn:F,lazyLoad:A,expandNode:R,handleCheckChange:Z})),se([d,()=>e.options],V,{deep:!0,immediate:!0}),se(()=>e.modelValue,()=>{l=!1,q()},{deep:!0}),se(()=>k.value,c=>{ge(c,e.modelValue)||(s(Ee,c),s(we,c))}),Ha(()=>p.value=[]),ca(()=>!Be(e.modelValue)&&q()),{ns:n,menuList:p,menus:v,checkedNodes:g,handleKeyDown:ee,handleCheckChange:Z,getFlattedNodes:Y,getCheckedNodes:_,clearCheckedNodes:E,calculateCheckedValue:P,scrollToExpandingNode:X}}});function Bt(e,s,t,l,n,d){const o=W("el-cascader-menu");return h(),M("div",{class:D([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:e.handleKeyDown},[(h(!0),M(oe,null,ue(e.menus,(b,p)=>(h(),B(o,{key:p,ref_for:!0,ref:k=>e.menuList[p]=k,index:p,nodes:[...b]},{empty:L(()=>[Ne(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var zt=Se(It,[["render",Bt],["__file","index.vue"]]);const Ft=fa(zt),xt=ra({...ha,size:Wa,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ie(Function),default:(e,s)=>e.text.includes(s)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ie(Function),default:()=>!0},placement:{type:ie(String),values:ja,default:"bottom-start"},fallbackPlacements:{type:ie(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:qa.teleported,tagType:{...Ye.type,default:"info"},tagEffect:{...Ye.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Ua}),At={[Ee]:e=>!0,[we]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>Ka(e),expandChange:e=>!!e,removeTag:e=>!!e},Rt="ElCascader",Ht=fe({name:Rt}),Ot=fe({...Ht,props:xt,emits:At,setup(e,{expose:s,emit:t}){const l=e,n={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:i,placement:r}=a;["right","left","bottom","top"].includes(r)||(i.arrow.x=35)},requires:["arrow"]}]},d=Za();let o=0,b=0;const p=de("cascader"),k=de("input"),{t:v}=ia(),{form:f,formItem:g}=Ya(),{valueOnClear:O}=Ja(l),{isComposing:F,handleComposition:V}=Qa({afterComposition(a){var i;const r=(i=a.target)==null?void 0:i.value;_e(r)}}),A=$(null),R=$(null),Z=$(null),I=$(null),Y=$(null),_=$(!1),E=$(!1),P=$(!1),q=$(!1),ne=$(""),X=$(""),ee=$([]),c=$([]),m=$([]),N=y(()=>d.style),C=y(()=>l.disabled||(f==null?void 0:f.disabled)),w=y(()=>l.placeholder||v("el.cascader.placeholder")),T=y(()=>X.value||ee.value.length>0||F.value?"":w.value),H=Xa(),x=y(()=>H.value==="small"?"small":"default"),K=y(()=>!!l.props.multiple),j=y(()=>!l.filterable||K.value),Re=y(()=>K.value?X.value:ne.value),be=y(()=>{var a;return((a=I.value)==null?void 0:a.checkedNodes)||[]}),va=y(()=>!l.clearable||C.value||P.value||!E.value?!1:!!be.value.length),ye=y(()=>{const{showAllLevels:a,separator:i}=l,r=be.value;return r.length?K.value?"":r[0].calcText(a,i):""}),ma=y(()=>(g==null?void 0:g.validateState)||""),Te=y({get(){return ua(l.modelValue)},set(a){const i=a!=null?a:O.value;t(Ee,i),t(we,i),l.validateEvent&&(g==null||g.validate("change").catch(r=>Ga()))}}),ga=y(()=>[p.b(),p.m(H.value),p.is("disabled",C.value),d.class]),ba=y(()=>[k.e("icon"),"icon-arrow-down",p.is("reverse",_.value)]),ya=y(()=>p.is("focus",_.value||q.value)),He=y(()=>{var a,i;return(i=(a=A.value)==null?void 0:a.popperRef)==null?void 0:i.contentRef}),U=a=>{var i,r,S;C.value||(a=a!=null?a:!_.value,a!==_.value&&(_.value=a,(r=(i=R.value)==null?void 0:i.input)==null||r.setAttribute("aria-expanded",`${a}`),a?(he(),ce((S=I.value)==null?void 0:S.scrollToExpandingNode)):l.filterable&&De(),t("visibleChange",a)))},he=()=>{ce(()=>{var a;(a=A.value)==null||a.updatePopper()})},$e=()=>{P.value=!1},Ve=a=>{const{showAllLevels:i,separator:r}=l;return{node:a,key:a.uid,text:a.calcText(i,r),hitState:!1,closable:!C.value&&!a.isDisabled,isCollapseTag:!1}},Pe=a=>{var i;const r=a.node;r.doCheck(!1),(i=I.value)==null||i.calculateCheckedValue(),t("removeTag",r.valueByOption)},ka=()=>{if(!K.value)return;const a=be.value,i=[],r=[];if(a.forEach(S=>r.push(Ve(S))),c.value=r,a.length){a.slice(0,l.maxCollapseTags).forEach(G=>i.push(Ve(G)));const S=a.slice(l.maxCollapseTags),ae=S.length;ae&&(l.collapseTags?i.push({key:-1,text:`+ ${ae}`,closable:!1,isCollapseTag:!0}):S.forEach(G=>i.push(Ve(G))))}ee.value=i},Oe=()=>{var a,i;const{filterMethod:r,showAllLevels:S,separator:ae}=l,G=(i=(a=I.value)==null?void 0:a.getFlattedNodes(!l.props.checkStrictly))==null?void 0:i.filter(te=>te.isDisabled?!1:(te.calcText(S,ae),r(te,Re.value)));K.value&&(ee.value.forEach(te=>{te.hitState=!1}),c.value.forEach(te=>{te.hitState=!1})),P.value=!0,m.value=G,he()},Ca=()=>{var a;let i;P.value&&Y.value?i=Y.value.$el.querySelector(`.${p.e("suggestion-item")}`):i=(a=I.value)==null?void 0:a.$el.querySelector(`.${p.b("node")}[tabindex="-1"]`),i&&(i.focus(),!P.value&&i.click())},Le=()=>{var a,i;const r=(a=R.value)==null?void 0:a.input,S=Z.value,ae=(i=Y.value)==null?void 0:i.$el;if(!(!da||!r)){if(ae){const G=ae.querySelector(`.${p.e("suggestion-list")}`);G.style.minWidth=`${r.offsetWidth}px`}if(S){const{offsetHeight:G}=S,te=ee.value.length>0?`${Math.max(G,o)-2}px`:`${o}px`;r.style.height=te,he()}}},Na=a=>{var i;return(i=I.value)==null?void 0:i.getCheckedNodes(a)},Ea=a=>{he(),t("expandChange",a)},wa=a=>{if(!F.value)switch(a.code){case z.enter:case z.numpadEnter:U();break;case z.down:U(!0),ce(Ca),a.preventDefault();break;case z.esc:_.value===!0&&(a.preventDefault(),a.stopPropagation(),U(!1));break;case z.tab:U(!1);break}},Sa=()=>{var a;(a=I.value)==null||a.clearCheckedNodes(),!_.value&&l.filterable&&De(),U(!1),t("clear")},De=()=>{const{value:a}=ye;ne.value=a,X.value=a},Ta=a=>{var i,r;const{checked:S}=a;K.value?(i=I.value)==null||i.handleCheckChange(a,!S,!1):(!S&&((r=I.value)==null||r.handleCheckChange(a,!0,!1)),U(!1))},$a=a=>{const i=a.target,{code:r}=a;switch(r){case z.up:case z.down:{const S=r===z.up?-1:1;Ce(pa(i,S,`.${p.e("suggestion-item")}[tabindex="-1"]`));break}case z.enter:case z.numpadEnter:i.click();break}},Va=()=>{const a=ee.value,i=a[a.length-1];b=X.value?0:b+1,!(!i||!b||l.collapseTags&&a.length>1)&&(i.hitState?Pe(i):i.hitState=!0)},Ke=a=>{const i=a.target,r=p.e("search-input");i.className===r&&(q.value=!0),t("focus",a)},Ue=a=>{q.value=!1,t("blur",a)},Pa=et(()=>{const{value:a}=Re;if(!a)return;const i=l.beforeFilter(a);at(i)?i.then(Oe).catch(()=>{}):i!==!1?Oe():$e()},l.debounce),_e=(a,i)=>{!_.value&&U(!0),!(i!=null&&i.isComposing)&&(a?Pa():$e())},qe=a=>Number.parseFloat(dt(k.cssVarName("input-height"),a).value)-2;return se(P,he),se([be,C,()=>l.collapseTags],ka),se(ee,()=>{ce(()=>Le())}),se(H,async()=>{await ce();const a=R.value.input;o=qe(a)||o,Le()}),se(ye,De,{immediate:!0}),ca(()=>{const a=R.value.input,i=qe(a);o=a.offsetHeight||i,tt(a,Le)}),s({getCheckedNodes:Na,cascaderPanelRef:I,togglePopperVisible:U,contentRef:He,presentText:ye}),(a,i)=>(h(),B(u(Qe),{ref_key:"tooltipRef",ref:A,visible:_.value,teleported:a.teleported,"popper-class":[u(p).e("dropdown"),a.popperClass],"popper-options":n,"fallback-placements":a.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:a.placement,transition:`${u(p).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:a.persistent,onHide:$e},{default:L(()=>[ke((h(),M("div",{class:D(u(ga)),style:st(u(N)),onClick:()=>U(u(j)?void 0:!0),onKeydown:wa,onMouseenter:r=>E.value=!0,onMouseleave:r=>E.value=!1},[Q(u(nt),{ref_key:"input",ref:R,modelValue:ne.value,"onUpdate:modelValue":r=>ne.value=r,placeholder:u(T),readonly:u(j),disabled:u(C),"validate-event":!1,size:u(H),class:D(u(ya)),tabindex:u(K)&&a.filterable&&!u(C)?-1:void 0,onCompositionstart:u(V),onCompositionupdate:u(V),onCompositionend:u(V),onFocus:Ke,onBlur:Ue,onInput:_e},{suffix:L(()=>[u(va)?(h(),B(u(me),{key:"clear",class:D([u(k).e("icon"),"icon-circle-close"]),onClick:ve(Sa,["stop"])},{default:L(()=>[Q(u(ot))]),_:1},8,["class","onClick"])):(h(),B(u(me),{key:"arrow-down",class:D(u(ba)),onClick:ve(r=>U(),["stop"])},{default:L(()=>[Q(u(it))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),u(K)?(h(),M("div",{key:0,ref_key:"tagWrapper",ref:Z,class:D([u(p).e("tags"),u(p).is("validate",!!u(ma))])},[(h(!0),M(oe,null,ue(ee.value,r=>(h(),B(u(Fe),{key:r.key,type:a.tagType,size:u(x),effect:a.tagEffect,hit:r.hitState,closable:r.closable,"disable-transitions":"",onClose:S=>Pe(r)},{default:L(()=>[r.isCollapseTag===!1?(h(),M("span",{key:0},le(r.text),1)):(h(),B(u(Qe),{key:1,disabled:_.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:L(()=>[re("span",null,le(r.text),1)]),content:L(()=>[re("div",{class:D(u(p).e("collapse-tags"))},[(h(!0),M(oe,null,ue(c.value.slice(a.maxCollapseTags),(S,ae)=>(h(),M("div",{key:ae,class:D(u(p).e("collapse-tag"))},[(h(),B(u(Fe),{key:S.key,class:"in-tooltip",type:a.tagType,size:u(x),effect:a.tagEffect,hit:S.hitState,closable:S.closable,"disable-transitions":"",onClose:G=>Pe(S)},{default:L(()=>[re("span",null,le(S.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),a.filterable&&!u(C)?ke((h(),M("input",{key:0,"onUpdate:modelValue":r=>X.value=r,type:"text",class:D(u(p).e("search-input")),placeholder:u(ye)?"":u(w),onInput:r=>_e(X.value,r),onClick:ve(r=>U(!0),["stop"]),onKeydown:rt(Va,["delete"]),onCompositionstart:u(V),onCompositionupdate:u(V),onCompositionend:u(V),onFocus:Ke,onBlur:Ue},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[ct,X.value]]):J("v-if",!0)],2)):J("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[u(ut),()=>U(!1),u(He)]])]),content:L(()=>[ke(Q(u(Ft),{ref_key:"cascaderPanelRef",ref:I,modelValue:u(Te),"onUpdate:modelValue":r=>lt(Te)?Te.value=r:null,options:a.options,props:l.props,border:!1,"render-label":a.$slots.default,onExpandChange:Ea,onClose:r=>a.$nextTick(()=>U(!1))},{empty:L(()=>[Ne(a.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Je,!P.value]]),a.filterable?ke((h(),B(u(oa),{key:0,ref_key:"suggestionPanel",ref:Y,tag:"ul",class:D(u(p).e("suggestion-panel")),"view-class":u(p).e("suggestion-list"),onKeydown:$a},{default:L(()=>[m.value.length?(h(!0),M(oe,{key:0},ue(m.value,r=>(h(),M("li",{key:r.uid,class:D([u(p).e("suggestion-item"),u(p).is("checked",r.checked)]),tabindex:-1,onClick:S=>Ta(r)},[re("span",null,le(r.text),1),r.checked?(h(),B(u(me),{key:0},{default:L(()=>[Q(u(sa))]),_:1})):J("v-if",!0)],10,["onClick"]))),128)):Ne(a.$slots,"empty",{key:1},()=>[re("li",{class:D(u(p).e("empty-text"))},le(u(v)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Je,P.value]]):J("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var Kt=Se(Ot,[["__file","cascader.vue"]]);const Ut=fa(Kt),qt="/",jt=pt("regions",{state:()=>({regionsData:null}),actions:{setRegionsData(e){this.regionsData=e}}});function Wt(){const e=jt(),{regionsData:s}=ft(e);return s.value==null&&(e.setRegionsData([]),Zt().then(t=>{e.setRegionsData(t)}).catch(t=>{ht.error(t.message)})),s}async function Zt(){var s;return(s=(await vt.get(qt+"json/regions-data.json",{baseURL:""})).data)!=null?s:[]}function Me(e,s){return s==="label"?e.map(t=>{const l={label:t.label,value:t.label};return t.children&&(l.children=t.children.map(n=>{const d={label:n.label,value:n.label};return n.children&&(d.children=n.children.map(o=>({label:o.label,value:o.label}))),d})),l}):e}function Yt(e,s,t){return Me(s==="provinceCity"?e.map(l=>{const n={label:l.label,value:l.value};return l.children&&(n.children=l.children.map(d=>({label:d.label,value:d.value}))),n}):s==="province"?e.map(l=>({label:l.label,value:l.value})):e,t)}function ta(e,s){const t=[];return e&&e.length&&s&&s.forEach(l=>{l.value===e[0]&&(t.push(l.label),l.children&&l.children.length&&l.children.forEach(n=>{n.value===e[1]&&t.push(n.label),n.children&&n.children.length&&n.children.forEach(d=>{d.value===e[2]&&t.push(d.label)})}))}),t}const Jt={key:0},Gt=Object.assign({name:"RegionsSelect"},{__name:"index",props:mt({options:Array,valueField:String,type:String,multiple:Boolean,component:String,placeholder:String,disabled:Boolean,clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},cascaderProps:Object,collapseTags:{type:Boolean,default:!0},maxCollapseTags:{type:Number,default:5},collapseTagsTooltip:Boolean,showAllLevels:{type:Boolean,default:!0},separator:String,teleported:Boolean,size:String},{modelValue:{type:Array},modelModifiers:{}}),emits:["update:modelValue"],setup(e,{expose:s}){var k;const t=e,l=gt(e,"modelValue"),n=Wt(),d=$(null),o=ze({...t.cascaderProps||{},multiple:t.multiple||!!((k=t.cascaderProps)!=null&&k.multiple)}),b=y(()=>{var f,g;const v=(g=(f=t.options)!=null?f:n.value)!=null?g:[];return Yt(v,t.type,t.valueField)}),p=y(()=>{const v=" / ",f=l.value;if(f&&f.length&&Array.isArray(f[0])){const O=[];return f.forEach(F=>{const V=ta(F,b.value);O.push(V.join(v))}),O}return ta(f,b.value).join(v)});return se(()=>t.cascaderProps,v=>{const f=v||{};["expandTrigger","checkStrictly","emitPath","lazy","lazyLoad","value","label","children","disabled","leaf","hoverThreshold"].forEach(g=>{o[g]==null&&f[g]==null||o[g]!==f[g]&&(o[g]=f[g])}),t.multiple?o.multiple||(o.multiple=!0):!!o.multiple!=!!f.multiple&&(o.multiple=f.multiple)},{immediate:!0,deep:!0}),s({cascaderRef:d,getCheckedNodes:v=>{var f,g;return(g=(f=d.value)==null?void 0:f.getCheckedNodes)==null?void 0:g.call(f,!!v)}}),(v,f)=>{const g=Fe,O=bt,F=Ut;return e.component==="text"?(h(),M(oe,{key:0},[typeof p.value=="string"?(h(),M("span",Jt,le(p.value),1)):(h(),B(O,{key:1,wrap:!0},{default:L(()=>[(h(!0),M(oe,null,ue(p.value,V=>(h(),B(g,{key:V,"disable-transitions":!0,size:"small",type:"info"},{default:L(()=>[Ie(le(V),1)]),_:2},1024))),128))]),_:1}))],64)):(h(),B(F,{key:1,ref_key:"cascaderRef",ref:d,size:e.size,disabled:e.disabled,clearable:e.clearable,modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=V=>l.value=V),options:b.value,filterable:e.filterable,placeholder:e.placeholder,props:o,"popper-class":"ele-popper-higher","collapse-tags":e.collapseTags,"max-collapse-tags":e.maxCollapseTags,"collapse-tags-tooltip":e.collapseTagsTooltip,showAllLevels:e.showAllLevels,separator:e.separator,teleported:e.teleported,class:"ele-fluid"},null,8,["size","disabled","clearable","modelValue","options","filterable","placeholder","props","collapse-tags","max-collapse-tags","collapse-tags-tooltip","showAllLevels","separator","teleported"]))}}});export{Ut as E,Gt as _,At as a,xt as c};
